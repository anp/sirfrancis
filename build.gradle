plugins {
    id 'java'
    id 'application'
    id 'com.github.johnrengelman.shadow' version '1.2.0'
}

sourceCompatibility = 1.8
targetCompatibility = 1.8
version = '0.1-LEARNING'

[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

//fill this out and uncomment
mainClassName = 'io.sirfrancis.bacon.BaconApplication'

repositories {
    mavenCentral()
}

dependencies {
    def dropwizardVersion = '0.7.1'
    compile(
            'io.dropwizard:dropwizard-core:' + dropwizardVersion//,
            //'io.dropwizard:dropwizard-hibernate:' + dropwizardVersion,
            //'io.dropwizard:dropwizard-migrations:' + dropwizardVersion,
            //'io.dropwizard:dropwizard-auth:' + dropwizardVersion,
    )
    testCompile 'junit:junit:4.11'
}

run {
    //MAKE SURE CONFIG PATH IS CORRECT
    args 'server', './src/dist/config/bacon.yml'
}

task wrapper(type: Wrapper) {
    gradleVersion = '2.2.1'
}

// Configure the shadow jar task
shadowJar {
    mergeServiceFiles()
    exclude('META-INF/*.DSA')
    exclude('META-INF/*.RSA')
}
jar {
    manifest {
        attributes (
            'Main-Class': mainClassName,
            'Implementation-Title': "Bacon",
            'Implementation-Version': version
        )
    }
}